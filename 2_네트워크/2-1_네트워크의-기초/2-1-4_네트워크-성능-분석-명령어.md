# 네트워크 성능 분석 명령어

애플리케이션 코드 상에는 문제가 없는데, 사용자가 서비스로부터 데이터를 가져오지 못하는 상황이 생기는 경우가 있다. 이는 네트워크 병목 현상일 가능성이 있다. 네트워크 병목 현상의 주된 원인은 다음과 같다:

- 네트워크 대역폭
- 네트워크 토폴로지
- 서버 CPU, 메모리 사용량
- 비효율적인 네트워크 구성

이런 상황 발생 시, 네트워크 관련 테스트와 네트워크와 무관한 테스트를 통해 네트워크로부터 발생한 문제점인지 확인한 후 네트워크 성능 분석을 해봐야 한다. 이런 경우 사용되는 명령어들이 있다.

## ping(Packet INternet Groper)

ping은 네트워크 상태를 확인하려는 대상 노드를 향해 일정 크기의 패킷을 전송하는 명령어이다. 이를 통해 해당 노드의 패킷 수신 상태와 도달하기까지 시간 등을 알 수 있으며, 해당 노드까지 네트워크가 잘 연결되어 있는지 확인할 수 있다.

ping은 TCP/IP 프로토콜 중에 ICMP 프로토콜을 통해 동작한다. 이 때문에, ICMP 프로토콜을 지원하지 않는 기기를 대상으로는 실행할 수 없거나, 네트워크 정책상 ICMP나 traceroute를 차단하는 대상의 경우 ping 테스팅이 불가하다.

```
# ping [IP 주소/도메인 주소]로 실행

# macOS에서 실행 예시 
% ping www.google.com -c 12
PING www.google.com (142.250.76.132): 56 data bytes
64 bytes from 142.250.76.132: icmp_seq=0 ttl=56 time=33.657 ms
64 bytes from 142.250.76.132: icmp_seq=1 ttl=56 time=33.892 ms
64 bytes from 142.250.76.132: icmp_seq=2 ttl=56 time=33.749 ms
64 bytes from 142.250.76.132: icmp_seq=3 ttl=56 time=34.048 ms
64 bytes from 142.250.76.132: icmp_seq=4 ttl=56 time=33.901 ms
64 bytes from 142.250.76.132: icmp_seq=5 ttl=56 time=33.854 ms
64 bytes from 142.250.76.132: icmp_seq=6 ttl=56 time=33.725 ms
64 bytes from 142.250.76.132: icmp_seq=7 ttl=56 time=33.690 ms
64 bytes from 142.250.76.132: icmp_seq=8 ttl=56 time=33.611 ms
64 bytes from 142.250.76.132: icmp_seq=9 ttl=56 time=33.924 ms
64 bytes from 142.250.76.132: icmp_seq=10 ttl=56 time=33.765 ms
64 bytes from 142.250.76.132: icmp_seq=11 ttl=56 time=33.595 ms

--- www.google.com ping statistics ---
12 packets transmitted, 12 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 33.595/33.784/34.048/0.134 ms
```

## netstat

netstat 명령어는 접속되어 있는 서비스들의 네트워크 상태를 표시하는데 사용된다. 네트워크 접속, 라우팅 테이블, 네트워크 프로토콜 등 리스트를 보여준다. 주로 서비스의 포트가 열려 있는지 확인할 때 사용한다.

## nslookup

nslookup은 DNS에 관련된 내용을 확인하기 위해 쓰는 명령어이다. 특정 도메인에 매핑된 IP를 확인하기 위해 사용한다.

## tracert/traceroute

목적지 노드까지 네트워크 경로를 확인할 때 사용하는 명령어이다. 목적지 노드까지의 구간들 중 어느 구간에서 응답 시간이 느려지는지 등을 확인할 수 있다.

- 윈도우: tracert
- 맥/리눅스: traceroute

## 이외 명령어

- ftp: 대형 파일을 전송하여 테스팅
- tcpdump: 노드로 오고 가는 패킷 캡쳐하는 명령어
- wireshark, netmon: 네트워크 분석 프로그램